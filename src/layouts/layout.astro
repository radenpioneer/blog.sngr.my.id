---
import { getEntry } from "astro:content";
import BaseLayout from "./base.astro";
import Nav from "~/components/nav.astro";
import { getImage } from "astro:assets";

const site = await getEntry('site', 'site')
const logo = await getImage({ src: site.data.logo, width: 35, height: 35, densities: [1, 1.5, 2], loading: 'eager' })
---

<BaseLayout>
    <!-- head -->
    <Fragment slot="head">
        <link rel="preload" href={logo.src} imagesrcset={logo.srcSet.attribute} imagesizes={logo.attributes.sizes} as="image">
        <slot name="head" />
    </Fragment>

    <!-- body -->
    <header>
        <Nav site={site} logo={logo} />
    </header>
    <slot />
</BaseLayout>

<style lang="scss" is:global>
    @use "@picocss/pico/scss/pico";

    body {
        min-height: 100vh;
    }
</style>