---
import ContentLayout from '~/layouts/content.astro'
import { getEntry } from 'astro:content'
// import { Debug } from 'astro/components'

const { blog, lang } = Astro.params
if (lang!.length > 2) {
  return Astro.redirect(`${Astro.url.pathname}/en`)
}
const entry = await getEntry('blog', blog!.split('/').at(-1) as string)
if (!entry) {
  return Astro.redirect('/404')
}

const { Content } = await entry.render()
export const prerender = false
---

<ContentLayout page={entry} lang={lang}>
  <Content />
</ContentLayout>

<!-- <Debug {{ lang, blog, entry }} /> -->
